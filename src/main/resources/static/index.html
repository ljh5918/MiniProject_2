<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
<<<<<<< HEAD
    <title>MovieSense - ë©”ì¸</title>
    <style>
        #navbar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .hide {
            display: none;
        }
    </style>
</head>
<body>
<h1>MovieSense</h1>
<hr>

<!-- ê¸°ë³¸ ë„¤ë¹„ê²Œì´ì…˜ -->
<div id="navbar">
    <a href="/login.html" id="linkLogin">Login</a>
    <a href="/register.html" id="linkRegister">Register</a>

    <span id="userInfo" class="hide">
        <span id="userName"></span> ë‹˜ ì•ˆë…•í•˜ì„¸ìš” |
        <a href="#" id="linkLogout">Logout</a> |
        <a href="/board.html">Board</a>
    </span>
</div>

<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
    window.onload = function () {
        checkLoginStatus();

        // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.getElementById("linkLogout").onclick = logout;
    }

    // ğŸ”¹ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ (JWT ì¿ í‚¤ ê¸°ë°˜)
    async function checkLoginStatus() {
        try {
            const res = await fetch("/auth/me", {
                method: "GET",
                credentials: "include"
            });

            if (!res.ok) {
                showLoggedOutView();
                return;
            }

            const user = await res.json();
            showLoggedInView(user);

        } catch (err) {
            console.error("ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:", err);
            showLoggedOutView();
        }
    }

    // ğŸ”¹ ë¡œê·¸ì¸ëœ í™”ë©´ í‘œì‹œ
    function showLoggedInView(user) {
        document.getElementById("userName").textContent = user.name || user.email;

        // ë¡œê·¸ì¸/íšŒì›ê°€ì… ìˆ¨ê¸°ê¸°
        document.getElementById("linkLogin").classList.add("hide");
        document.getElementById("linkRegister").classList.add("hide");

        // ì‚¬ìš©ì ë©”ë‰´ ë³´ì´ê¸°
        document.getElementById("userInfo").classList.remove("hide");
    }

    // ğŸ”¹ ë¡œê·¸ì¸ ì•ˆëœ í™”ë©´ í‘œì‹œ
    function showLoggedOutView() {
        document.getElementById("linkLogin").classList.remove("hide");
        document.getElementById("linkRegister").classList.remove("hide");

        document.getElementById("userInfo").classList.add("hide");
    }

    // ğŸ”¹ ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
    async function logout() {
        try {
            await fetch("/auth/logout", {
                method: "POST",
                credentials: "include"
            });

            alert("ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤!");
            showLoggedOutView();
        } catch (e) {
            console.error("ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:", e);
        }
    }
</script>
=======
    <title>MovieSense - ë‚˜ë§Œì˜ ì˜í™” íë ˆì´í„°</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <header>
        <div class="logo" onclick="location.reload()">ğŸ¬ MovieSense</div>
        
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ì˜í™” ì œëª© ê²€ìƒ‰...">
            <button onclick="searchMovies()">ğŸ”</button>
        </div>

        <div class="auth-buttons">
            <div id="guestNav">
                <button class="btn-login" onclick="fakeLogin()">ë¡œê·¸ì¸</button>
                <button class="btn-signup">íšŒì›ê°€ì…</button>
            </div>
            
            <div id="userNav" style="display: none;">
                <span id="welcomeMsg">í™˜ì˜í•©ë‹ˆë‹¤!</span>
                <button class="btn-mypage" onclick="alert('ë§ˆì´í˜ì´ì§€ ì¤€ë¹„ì¤‘')">â­ ì°œëª©ë¡</button>
                <button class="btn-logout" onclick="fakeLogout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </header>

    <main>
        <section id="personalSection" style="display: none;">
            <h2>âœ¨ <span id="userName">User</span>ë‹˜ ì·¨í–¥ ì €ê²© ì˜í™”</h2>
            <div id="personalContainer" class="movie-grid"></div>
            <hr class="divider">
        </section>

        <h2 id="sectionTitle">ğŸ”¥ ì‹¤ì‹œê°„ ì¸ê¸° ì˜í™”</h2>
        <div id="movieContainer" class="movie-grid"></div>
    </main>

    <div id="movieModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            
            <div class="modal-layout">
                <div class="modal-left">
                    <img id="modalPoster" src="" alt="í¬ìŠ¤í„°">
                </div>

                <div class="modal-right">
                    
                    <div class="modal-header-info">
                        <h2 id="modalTitle">ì˜í™” ì œëª©</h2>
                        <button class="btn-like" onclick="toggleLike()">â¤ ì°œí•˜ê¸°</button>
                    </div>

                    <div class="modal-overview-box">
                        <h3>ì¤„ê±°ë¦¬</h3>
                        <p id="modalOverview">ì¤„ê±°ë¦¬ ë‚´ìš©...</p>
                    </div>

                    <div class="modal-recommend-box">
                        <h3>ğŸ’¡ ì´ ì˜í™”ì™€ ë¹„ìŠ·í•œ ì‘í’ˆ</h3>
                        <div id="recommendContainer" class="recommend-grid">
                            </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
>>>>>>> 54d922aaaa322d7404b195494cdcca6726932854
</body>
</html>
